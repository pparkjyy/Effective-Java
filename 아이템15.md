# 4-15 // 클래스와 멤버의 접근 권한을 최소화하라

어설프게 설계된 컴포넌트와 잘 설계된 컴포넌트의 가장 큰 차이는 클래스 내부 데이터와 내부 구현 정보를 외부 컴포넌트로부터 얼마나 잘 숨겼는가이다.

# 정보 은닉 장점
- 시스템 개발 속도 상승
- 시스템 관리 비용 감소
- 성능 최적화에 도움 -> 다른 컴포넌트에 영향을 주지 않고 해당 컴포넌트만 최적화 할 수 있기 때문
- 소프트웨어 재사용성 상승

# 접근 제어 매커니즘
- 요소의 접근성은 그 요소가 선언된 위치와 접근 제한자(private, protected, public)로 정해진다.
- 기본 원칙은, 모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다는 것
- public일 필요가 없는 클래스의 접근 수준을 default 클래스로 좁혀야 한다.
- private: 멤버를 선언한 톱레벨 클래스에만 접근 가능
- package-private(default): 패키지 안의 모든 클래스에서 접근 가능
- protected: 동일 패키지 및 상속받은 하위 클래스에서 접근 가능
- public: 모든 곳에서 접근 가능
- public 클래스의 인스턴스 필드는 되도록 public이 아니어야 한다.(아이템 16)
- 필요에 따라 public static final 상수 필드는 공개해도 좋다.

|                 | 같은 클래스 | 같은 패키지 | 하위 클래스 | 전체 |
| --------------- | ----------------------------- | ----------------------------- | ------------------------------ | ------------------- |
| public          | O                             | O                             | O                              | O                   |
| protected       | O                             | O                             | O                              | X                   |
| package-private | O                             | O                             | X                              | X                   |
| private         | O                             | X                             | X                              | X                   |

# 주의점
- public 클래스의 인스턴스 필드는 public이 아니어야 한다. -> public 가변 필드를 갖는 클래스는 스레드 안전하지 않다.
- 정적필드에서의 public 필드 예외 -> public static final 필드 공개는 허용한다. 이런 필드는 반드시 기본 타입 값이나 불변 객체를 참조해야 한다.
- 클래스에서 public static final 배열필드를 두거나 이 필드를 반환하는 접근자 메서드를 제공하서는 안된다. -> 클라이언트에서 배열의 내용을 수정할 수 있기 떄문

## 모듈시스템
- java 9 부터 도입
- 패키지의 묶음
- 모듈 시스템을 활용하면 클래스를 외부에 공개하지 않으면서도 같은 모듈을 이루는 패키지 사이에서는 자유롭게 공유가 가능하다는 장점이 있다.
- 접근 수준은 public, protected 수준과 같으나 그 효과가 모듈 내부로 한정된다는 점만 다르다.